import { Controller, Get, Post, Body, UseGuards, Query } from '@nestjs/common'; import { AdminService } from './admin.service'; import { ManageBalanceDto } from './dto/manage-balance.dto'; import { JwtGuard } from '../common/guards/jwt.guard'; import { Roles } from '../common/decorators/roles.decorator'; import { RolesGuard } from '../common/guards/roles.guard'; import { UserRole } from '../common/decorators/roles.decorator';
@Controller('admin') @UseGuards(JwtGuard) @Roles(UserRole.ADMIN) @UseGuards(RolesGuard) export class AdminController { constructor(private adminService: AdminService) {} @Get('stats') async getStats() { return this.adminService.getStats(); } @Get('users') async getUserList(@Query('skip') skip = 0, @Query('take') take = 10) { return this.adminService.getUserList(skip, take); } @Post('approve-seller') async approveSeller(@Body() body: { sellerId: string }) { return this.adminService.approveSeller(body.sellerId); } @Post('manage-balance') async manageBalance(@Body() manageBalanceDto: ManageBalanceDto) { return this.adminService.manageBalance(manageBalanceDto); } }